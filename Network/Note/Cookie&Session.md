# :books: Cookie & Session <sub>μΏ ν‚¤μ™€ μ„Έμ…</sub>

## :bookmark_tabs: λ©μ°¨

[:arrow_up: **Network**](../README.md)

1. ### [Cookie](#π“•-cookie-μΏ ν‚¤)
2. ### [Session](#π“™-session-μ„Έμ…)

# :closed_book: Cookie <sub>μΏ ν‚¤</sub>

## μ •μ

> μ›Ή μ„λ²„μ— μ ‘μ†ν•  λ• μƒμ„±λλ” μ •λ³΄λ¥Ό λ‹΄μ€ μ„μ‹ νμΌ

## νΉμ§•

- HTTPμ λ°μ΄ν„°μ μΌμΆ…
- μ‚¬μ©μκ°€ μ–΄λ– ν• μ›Ή μ‚¬μ΄νΈλ¥Ό λ°©λ¬Έν•  κ²½μ°, ν•΄λ‹Ή μ›Ή μ„λ²„μ—μ„ μ‚¬μ©μμ μ»΄ν“¨ν„°μ— μ‚¬μ©μ μƒνƒ μ •λ³΄λ¥Ό μ €μ¥ν•λ” κΈ°λ΅ νμΌ
- ν΄λΌμ΄μ–ΈνΈμ PCμ— μƒνƒ μ •λ³΄λ¥Ό μ €μ¥ν–λ‹¤κ°€ ν•„μ”μ‹ μ •λ³΄λ¥Ό μ°Έμ΅°ν•κ±°λ‚ μ¬μ‚¬μ© ν•¨
- μ΄λ¦„, κ°’, λ§λ£μΌ(μ €μ¥ κΈ°κ°„ μ„¤μ •), κ²½λ΅ μ •λ³΄λ΅ κµ¬μ„±
- λ°μ΄ν„° ν•νƒλ” ν‚¤-κ°’μμΌλ΅ μ΄λ£¨μ–΄μ§„ StringμΌλ΅ μ €μ¥ν•λ©° `;`λ¥Ό κΈ°μ¤€μΌλ΅ κµ¬λ¶„
  `document.cookie = 'userId=adjh54; path=/; max-age=3600;';`
- λΈλΌμ°μ Έλ³„λ΅ μ €μ¥κ°€λ¥ν• μΏ ν‚¤μ μκ°€ λ‹¤λ¥΄λ©°, ν•λ‚μ μΏ ν‚¤λ” μ•½ 4KBκΉμ§€ μ €μ¥ν•¨

## μΏ ν‚¤μ λ™μ‘ μμ„

1. ν΄λΌμ΄μ–ΈνΈκ°€ νμ΄μ§€λ¥Ό μ”μ²­ (μ‚¬μ©μκ°€ μ›Ήμ‚¬μ΄νΈ μ ‘κ·Ό)
2. μ›Ή μ„λ²„λ” μΏ ν‚¤λ¥Ό μƒμ„±
3. μ›Ή μ„λ²„λ” HTTP ν™”λ©΄μ„ μ‘λ‹µν•  λ• μƒμ„±ν• μΏ ν‚¤μ— μ •λ³΄λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² μ „μ†΅
4. μΏ ν‚¤λ” ν΄λΌμ΄μ–ΈνΈκ°€ κ°€μ§€κ³  μλ‹¤κ°€Β μ„λ²„μ— μ”μ²­ν•  λ• μ”μ²­κ³Ό ν•¨κ» μΏ ν‚¤λ¥Ό μ „μ†΅
   - λ™μΌ μ‚¬μ΄νΈ μ¬λ°©λ¬Έμ‹ ν•΄λ‹Ή μΏ ν‚¤κ°€ μλ” κ²½μ°, μ”μ²­ νμ΄μ§€μ™€ ν•¨κ» μΏ ν‚¤λ¥Ό μ „μ†΅

## μΏ ν‚¤μ μ‚¬μ©μ²

- **μ„Έμ…κ΄€λ¦¬(Session Management)**
  - λ΅κ·ΈμΈ μΈμ¦, μ‚¬μ©μ λ‹‰λ„¤μ„, μ ‘μ†μ‹κ°„, μ¥λ°”κµ¬λ‹ λ“±μ μ„λ²„κ°€ μ•μ•„μ•Ό ν•  μ •λ³΄λ“¤μ„ μ €μ¥
- **κ°μΈν™”(Personalization)**
  - μ‚¬μ©μλ§λ‹¤ λ‹¤λ¥΄κ² κ°μμ— λ§λ” μ μ ν• μ •λ³΄λ‚ κ΄‘κ³ λ¥Ό λ³΄μ—¬μ¤
- **νΈλν‚Ή(Tracking)**
  - μ‚¬μ©μμ ν–‰λ™κ³Ό ν¨ν„΄μ„ λ¶„μ„ν•κ³  κΈ°λ΅

## VanillaJSμ—μ„ μΏ ν‚¤ λ‹¤λ£¨κΈ°

### μΏ ν‚¤ λ“±λ΅ / μμ •

- μΏ ν‚¤μ—μ„ Cookie-nameμ„ λ§μ¶”κ² λλ‹¤λ©΄ μμ • λ° μΏ ν‚¤μ μ‹κ°„μ„ μ—°μ¥μ΄ κ°€λ¥

```js
/**
 * Cookieμ κ°’μ„ μ„Έν…ν•΄μ£Όλ” ν•¨μ
 * @param {string} cookieName : μΏ ν‚¤μ μ΄λ¦„
 * @param {string} cookieValue : μΏ ν‚¤μ κ°’
 * @param {number} expiresHour : μΏ ν‚¤μ λ§λ£μΌ
 * @return {void}
 */

const setCookie = (
  cookieName: string,
  cookieValue: string,
  expiresHour: number
): void => {
  const expired = new Date();
  expired.setTime(expired.getTime() + expiresHour * 24 * 60 * 60 * 1000);
  document.cookie = `${cookieName}=${cookieValue}; path=/; Expires=${expired}`;
};
```

### μΏ ν‚¤ μ΅°ν

```js
/**
 * Cookieμ κ°’μ„ λ°ν™ν•΄μ£Όλ” ν•¨μ
 * @param cookieName
 * @returns {string} cookie value
 */

const getCookie = (cookieName: string): string => {
  let result = "";
  // 1. λ¨λ“  μΏ ν‚¤λ¥Ό κ°€μ Έμ™€μ„ λ¶„λ¦¬ ν•¨
  document.cookie.split(";").map((item) => {
    // 2. λ¶„λ¦¬ν• κ°’μ μ•λ’¤ κ³µλ°± μ κ±°
    const cookieItem = item.trim();
    // 3. ν‚¤ κ°’κ³Ό λ§¤μΉ­μ΄ λλ” κ°’μ„ λ°ν™
    if (item.includes(cookieName)) {
      result = cookieItem.split("=")[1];
    }
  });
  return result; // μ΅΄μ¬ν•λ©΄ κ°’μ„ λ°ν™, λ―Έ μ΅΄μ¬ν•λ©΄ λΉκ°’ λ°ν™
};
```

### μΏ ν‚¤ μ‚­μ 

```js
/**
 * Cookieμ κ°’μ„ μ‚­μ  ν•΄μ£Όλ” ν•¨μ
 * @param {string} cookieName : μΏ ν‚¤μ μ΄λ¦„
 * @return {void}
 */

const deleteCookie = (cookieName: string): void => {
  document.cookie = `${cookieName}=0; max-age=0`;
};
```

# :orange_book: Session <sub>μ„Έμ…</sub>

## νΉμ§•

- μ›Ή μ„λ²„μ— μ›Ή μ»¨ν…μ΄λ„μ μƒνƒλ¥Ό μ μ§€ν•κΈ° μ„ν• μ •λ³΄λ¥Ό μ €μ¥
- μ›Ή μ„λ²„μ μ €μ¥λλ” μΏ ν‚¤λλ” ν† ν°μΌλ΅ μ·¨κΈ‰(=μ„Έμ… μΏ ν‚¤, μ„Έμ… ν† ν°)
- μ‚¬μ©μκ°€ λΈλΌμ°μ €λ¥Ό λ‹«κ±°λ‚ μ„λ²„κ°€ μ„Έμ…μ„ λ§λ£μ‹μΌ°μ„λ•λ§ μ‚­μ λ¨
- μ„λ²„μΈ΅μ—μ„ λ°μ΄ν„°λ¥Ό λ‹¤λ£¨λ―€λ΅ μΏ ν‚¤λ³΄λ‹¤ λ³΄μ•μ΄ λΉ„κµμ  μΆ‹μ
- μ €μ¥ λ°μ΄ν„°μ— κ·κ²©κ³Ό μ©λ‰μ μ ν•μ΄ μ—†μ
- κ° ν΄λΌμ΄μ–ΈνΈλ§λ‹¤ κ³ μ μ Session IDλ¥Ό λ¶€μ—¬ν•΄ κ΄€λ¦¬ν•¨
  - Session IDλ΅ ν΄λΌμ΄μ–ΈνΈλ¥Ό κµ¬λ¶„ν•μ—¬ κ° ν΄λΌμ΄μ–ΈνΈ μ”κµ¬μ— λ§λ” μ„λΉ„μ¤ μ κ³µ

## μ„Έμ…μ λ™μ‘ μμ„

1. ν΄λΌμ΄μ–ΈνΈκ°€ νμ΄μ§€λ¥Ό μ”μ²­(μ‚¬μ©μκ°€ μ›Ήμ‚¬μ΄νΈ μ ‘κ·Ό)
2. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ Request-Header ν•„λ“μ Cookieλ¥Ό ν™•μΈ
   1. ν΄λΌμ΄μ–ΈνΈμ session-idκ°€ μ΅΄μ¬ν•λ©΄
      - μ„λ²„μ—μ„ session-idκ°€ μΌμΉν•λ” μ„Έμ…μ— μ ‘κ·Όν•΄ μƒνƒ μ •λ³΄λ¥Ό μ €μ¥/μμ •
   2. ν΄λΌμ΄μ–ΈνΈμ session-idκ°€ μ΅΄μ¬ν•μ§€ μ•μΌλ©΄
      - μ„λ²„λ” session-idλ¥Ό μƒμ„±ν•΄ ν΄λΌμ΄μ–ΈνΈμ—κ² λ°ν™ν•κ³  μƒλ΅μ΄ μ„Έμ…μ„ μƒμ„±
3. μ›Ή μ„λ²„λ” HTTP ν™”λ©΄μ„ μ‘λ‹µν•  λ• session-idλ¥Ό κΈ°λ΅ν• μΏ ν‚¤λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² μ „μ†΅
   - ν΄λΌμ΄μ–ΈνΈλ” μ¬μ ‘μ† μ‹, μΏ ν‚¤λ¥Ό μ΄μ©ν•μ—¬ session-id κ°’μ„ μ„λ²„μ— μ „λ‹¬

## μ„Έμ…μ μ‚¬μ©μ²

- μΏ ν‚¤μ™€ μ‚¬μ© λ©μ μ΄ λ€λ¶€λ¶„ μΌμΉ
- **μ„Έμ…κ΄€λ¦¬(Session Management)**
  - λ΅κ·ΈμΈ μΈμ¦, μ‚¬μ©μ λ‹‰λ„¤μ„, μ ‘μ†μ‹κ°„, μ¥λ°”κµ¬λ‹ λ“±μ μ„λ²„κ°€ μ•μ•„μ•Ό ν•  μ •λ³΄λ“¤μ„ μ €μ¥
- **κ°μΈν™”(Personalization)**
  - μ‚¬μ©μλ§λ‹¤ λ‹¤λ¥΄κ² κ°μμ— λ§λ” μ μ ν• μ •λ³΄λ‚ κ΄‘κ³ λ¥Ό λ³΄μ—¬μ¤
- **νΈλν‚Ή(Tracking)**
  - μ‚¬μ©μμ ν–‰λ™κ³Ό ν¨ν„΄μ„ λ¶„μ„ν•κ³  κΈ°λ΅
